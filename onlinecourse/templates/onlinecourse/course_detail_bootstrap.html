<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">

    <!-- Bootstrap -->
    <link rel="stylesheet"
          href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <title>Course Details</title>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-light bg-light">
    <a class="navbar-brand" href="{% url 'onlinecourse:index' %}">Home</a>

    <div>
        {% if user.is_authenticated %}
            <span class="mr-2">
                {{ user.first_name }} ({{ user.username }})
            </span>
            <a class="btn btn-outline-danger"
               href="{% url 'onlinecourse:logout' %}">
               Logout
            </a>
        {% else %}
            <a class="btn btn-primary"
               href="{% url 'onlinecourse:login' %}">
               Login
            </a>
        {% endif %}
    </div>
</nav>

<!-- COURSE CONTENT -->
<div class="container mt-4">

    <!-- Course Name -->
    <h2 class="mb-4">{{ course.name }}</h2>

    <!-- LESSONS -->
    <h4>Lessons</h4>

    {% for lesson in course.lesson_set.all %}
        <div class="card mb-3">
            <div class="card-header">
                Lesson {{ lesson.order|add:1 }} : {{ lesson.title }}
            </div>

            <div class="card-body">
                {{ lesson.content }}
            </div>
        </div>
    {% endfor %}

    <hr>

    <!-- EXAM SECTION -->
    <h4>Exam</h4>

    <form method="POST" action="{% url 'onlinecourse:submit' course.id %}">
        {% csrf_token %}

        {% for question in course.question_set.all %}
            <div class="card mb-3">
                <div class="card-header">
                    Question {{ forloop.counter }}:
                    {{ question.question_text }}
                </div>

                <div class="card-body">

                    {% for choice in question.choice_set.all %}
                        <div class="form-check">
                            <input class="form-check-input"
                                   type="checkbox"
                                   name="choice"
                                   value="{{ choice.id }}">

                            <label class="form-check-label">
                                {{ choice.choice_text }}
                            </label>
                        </div>
                    {% endfor %}

                </div>
            </div>
        {% endfor %}

        <button class="btn btn-success" type="submit">
            Submit Exam
        </button>

    </form>

</div>

</body>
</html>